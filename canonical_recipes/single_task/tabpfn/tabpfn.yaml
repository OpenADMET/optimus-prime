# This spection specifies the input data
data:
  # Specify the dataset file
  resource: ../ChEMBL_permissive_CYP3A4_CHEMBL340_aggregated.parquet
  type: intake
  input_col: OPENADMET_SMILES
  # Specify each (1+) of the target columns, or the column that you're trying to predict
  target_cols:
  - pchembl_value_mean
  dropna: true

# Additional metadata
metadata:
  authors: Cynthia Xu
  email: cynthia.xu@omsf.io
  biotargets:
  - CYP3A4
  build_number: 0
  description: basic regression using a TabPFN model
  driver: sklearn
  name: tabpfn_pchembl
  tag: openadmet-chembl
  tags:
  - openadmet
  - test
  - pchembl
  version: v1
procedure:
  feat:

    type: DescriptorFeaturizer
    
    params:
      descr_type: desc2d
  model:
    type: TabPFNRegressorModel
    params:
      ignore_pretraining_limits: True
      device: cuda
  split:
    params:
      random_state: 42
      test_size: 0.2
      train_size: 0.8
    type: ShuffleSplitter
  train:
    type: SKLearnBasicTrainer
report:
  eval:
  - params: {}
    type: RegressionMetrics
  - params:
      axes_labels:
      - True pChEMBL
      - Predicted pChEMBL
      max_val: 10
      min_val: 3
      pXC50: true
      title: CYP3A4 True vs Predicted pChEMBL on test set
    type: RegressionPlots
  - params:
      axes_labels:
      - True pChEMBL
      - Predicted pChEMBL
      max_val: 10
      min_val: 3
      n_repeats: 5
      n_splits: 2
      pXC50: true
      random_state: 42
      title: CYP3A4 True vs Predicted pChEMBL on test set
    type: SKLearnRepeatedKFoldCrossValidation
